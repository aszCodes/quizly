<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<title>Quizly Admin</title>
		<link rel="stylesheet" href="css/admin.css" />
		<link rel="shortcut icon" href="icon.png" type="image/x-icon" />
	</head>
	<body>
		<div class="admin-container">
			<div class="admin-header">
				<h1>Quizly Admin</h1>
				<a href="/" class="back-link">‚Üê Back to Quiz</a>
			</div>

			<div class="tabs">
				<button class="tab active" data-tab="dashboard">Dashboard</button>
				<button class="tab" data-tab="quizzes">Manage Quizzes</button>
				<button class="tab" data-tab="questions">Manage Questions</button>
				<button class="tab" data-tab="attempts">View Attempts</button>
			</div>

			<!-- Dashboard Tab -->
			<div class="tab-content active" id="dashboard">
				<h2 style="margin-bottom: 30px; color: #334155">Dashboard Overview</h2>
				<div class="stats-grid" id="stats-container"></div>
				<div class="card">
					<h3>Recent Activity</h3>
					<div id="recent-attempts"></div>
				</div>
			</div>

			<!-- Manage Quizzes Tab -->
			<div class="tab-content" id="quizzes">
				<div
					style="
						display: flex;
						justify-content: space-between;
						align-items: center;
						margin-bottom: 30px;
					"
				>
					<h2 style="color: #334155">Manage Quizzes</h2>
					<button class="btn btn-primary" id="create-quiz-btn">
						+ Create New Quiz
					</button>
				</div>
				<div id="alert-container"></div>
				<div id="quizzes-list"></div>
			</div>

			<!-- Manage Questions Tab -->
			<div class="tab-content" id="questions">
				<div
					style="
						display: flex;
						justify-content: space-between;
						align-items: center;
						margin-bottom: 30px;
					"
				>
					<h2 style="color: #334155">Manage Questions</h2>
					<div style="display: flex; gap: 10px">
						<button class="btn btn-secondary" id="import-questions-btn">
							Import from File
						</button>
						<button class="btn btn-primary" id="add-question-btn">
							+ Add Question
						</button>
					</div>
				</div>

				<div class="form-group">
					<label>Filter by Quiz:</label>
					<select id="quiz-filter">
						<option value="">All Quizzes</option>
					</select>
				</div>

				<div id="questions-list"></div>
			</div>

			<!-- View Attempts Tab -->
			<div class="tab-content" id="attempts">
				<div
					style="
						display: flex;
						justify-content: space-between;
						align-items: center;
						margin-bottom: 30px;
					"
				>
					<h2 style="color: #334155">Student Attempts</h2>
					<button class="btn btn-secondary" id="export-attempts-btn">
						Export to CSV
					</button>
				</div>

				<div class="form-group">
					<label>Filter by Quiz:</label>
					<select id="attempts-quiz-filter">
						<option value="">All Quizzes</option>
					</select>
				</div>

				<div class="table-container">
					<table id="attempts-table">
						<thead>
							<tr>
								<th>Student Name</th>
								<th>Quiz</th>
								<th>Score</th>
								<th>Percentage</th>
								<th>Date</th>
							</tr>
						</thead>
						<tbody></tbody>
					</table>
				</div>
			</div>
		</div>

		<!-- Create/Edit Quiz Modal -->
		<div class="modal" id="quiz-modal">
			<div class="modal-content">
				<div class="modal-header">
					<h2 id="quiz-modal-title">Create New Quiz</h2>
					<button class="close-modal">&times;</button>
				</div>
				<form id="quiz-form">
					<input type="hidden" id="quiz-id" />
					<div class="form-group">
						<label>Quiz Title *</label>
						<input type="text" id="quiz-title" required />
					</div>
					<div class="form-group">
						<label>Description</label>
						<textarea id="quiz-description"></textarea>
					</div>
					<div class="form-group">
						<label>Time Limit (minutes) *</label>
						<input type="number" id="quiz-time-limit" min="1" required />
					</div>
					<div class="form-group">
						<label>Allowed Attempts *</label>
						<input
							type="number"
							id="quiz-allowed-attempts"
							min="1"
							value="1"
							required
						/>
					</div>
					<div style="display: flex; gap: 10px; justify-content: flex-end">
						<button type="button" class="btn btn-secondary close-modal">
							Cancel
						</button>
						<button type="submit" class="btn btn-primary">Save Quiz</button>
					</div>
				</form>
			</div>
		</div>

		<!-- Add/Edit Question Modal -->
		<div class="modal" id="question-modal">
			<div class="modal-content">
				<div class="modal-header">
					<h2 id="question-modal-title">Add Question</h2>
					<button class="close-modal">&times;</button>
				</div>
				<form id="question-form">
					<input type="hidden" id="question-id" />
					<div class="form-group">
						<label>Quiz *</label>
						<select id="question-quiz-id" required>
							<option value="">Select a quiz</option>
						</select>
					</div>
					<div class="form-group">
						<label>Question Text *</label>
						<textarea id="question-text" required></textarea>
					</div>
					<div class="form-group">
						<label>Options *</label>
						<div class="option-inputs" id="options-container"></div>
						<button
							type="button"
							class="btn btn-secondary"
							id="add-option-btn"
							style="margin-top: 10px"
						>
							+ Add Option
						</button>
					</div>
					<div class="form-group">
						<label>Explanation (Optional)</label>
						<textarea
							id="question-explanation"
							placeholder="Explain the correct answer..."
						></textarea>
					</div>
					<div
						style="
							display: flex;
							gap: 10px;
							justify-content: flex-end;
							margin-top: 20px;
						"
					>
						<button type="button" class="btn btn-secondary close-modal">
							Cancel
						</button>
						<button type="submit" class="btn btn-primary">Save Question</button>
					</div>
				</form>
			</div>
		</div>

		<!-- Import Questions Modal -->
		<div class="modal" id="import-modal">
			<div class="modal-content">
				<div class="modal-header">
					<h2>Import Questions from File</h2>
					<button class="close-modal">&times;</button>
				</div>
				<div class="form-group">
					<label>Select Quiz *</label>
					<select id="import-quiz-id" required>
						<option value="">Select a quiz</option>
					</select>
				</div>
				<div class="file-upload" id="file-upload-area">
					<input type="file" id="file-input" accept=".json" />
					<p style="color: #64748b; margin-bottom: 10px">
						üìÅ Click to upload or drag and drop
					</p>
					<p style="color: #94a3b8; font-size: 0.9rem">
						Supports JSON files only
					</p>
				</div>
				<div
					style="
						margin-top: 20px;
						padding: 15px;
						background: #f1f5f9;
						border-radius: 6px;
						font-size: 0.9rem;
					"
				>
					<strong>JSON Format:</strong>
					<pre style="margin-top: 10px; overflow-x: auto">
[
  {
    "questionText": "Your question?",
    "options": ["Option A", "Option B", "Option C"],
    "correctAnswerIndex": 0
	"explanation": "Explain why this is correct (optional)"
  }
]</pre
					>
				</div>
				<div
					style="
						display: flex;
						gap: 10px;
						justify-content: flex-end;
						margin-top: 20px;
					"
				>
					<button type="button" class="btn btn-secondary close-modal">
						Cancel
					</button>
					<button
						type="button"
						class="btn btn-primary"
						id="import-btn"
						disabled
					>
						Import Questions
					</button>
				</div>
			</div>
		</div>

		<script type="module" src="js/admin/main.js"></script>
	</body>
</html>
